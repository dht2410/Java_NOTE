## 索引和算法

**支持的常见索引：**

- B+树
- 全文索引
- 哈希索引。会根据表的使用情况自动为表生成自适应哈希索引。

**B+树的插入：**

- 按Leaf Page和Index Page是否满来拆
- 为减少磁盘IO，会做旋转操作。即匀给兄弟节点

**B+树的删除：**

- 设置填充因子，最小50%。小于填充因子后和兄弟节点合并

**聚集索引：**

- 按照每张表的主键构造一棵B+树。每张表只能有一个聚集索引
- 并不是物理上连续的，而是逻辑上连续。页之间是双向链表连接，页内的行记录也是双向链表连接
- 对于主键的排序查找和范围查找非常快

**辅助索引：**

- 叶子节点不包含行记录的全部数据。叶子节点除了包含键值外，还包含一个书签。
- 先在辅助索引找到主键。然后通过聚集索引找到行记录。
- 回表
- alter table 表 add index 索引名 （列名，列名...）

**管理索引：**

show index from 表\G;

Cardinality表示不重复记录的预估值，改参数帮助优化器进行查询。

使用ANALYZE TABLE对Cardinality参数进行更改。

**联合索引：**

- 也是按B+树组织
- （a,b）这个联合索引不能用于对b进行索引

**覆盖索引：**

- 通过辅助索引查询主键，则直接用辅助索引就可以，不用聚集索引



当访问的数据占表中数据较大一部分时，优化器选择扫描聚集索引。







