## 文件系统

需要文件：

1. 需要大的空间
2. 需要保留很长时间
3. 进程并发存取有关信息

Windows对扩展名赋予含义。用户（或进程）可以在操作系统中注册扩展名，并且规定哪个程序“拥有”该扩展名。当用户双击某个文件名时，“拥有”该文件扩展名的程序就启动并运行该文件。例如，双击file.doc启动了Microsoft Word程序，并以file.doc作为待编辑的初始文件。

open。在使用文件之前，必须先打开文件。open调用的目的是：把文件属性和磁盘地址表装入内存，便于后续调用的快速存取。

每个进程都有自己的工作目录，这样在进程改变工作目录并退出后，其他进程不会受到影响，文件系统中也不会有改变的痕迹。对进程而言，切换工作目录是安全的，所以只要需要，就可以改变当前工作目录。

### 目录

opendir。目录内容可被读取。例如，为列出目录中全部文件，程序必须先打开该目录，然后读其中全部文件的文件名。与打开和读文件相同，在读目录前，必须打开目录。

#### 文件的实现

1. 连续分配。快速，但会出现碎片
2. 链表分配。随机存取缓慢
3. 文件分配表（FAT）。取出每个磁盘块的指针字，把它放到内存的一个表中。表的每一项记录一个数字。对大磁盘不适用。
4. i节点（index-node）的数据结构，其中列出了文件属性和文件块的磁盘地址。只有对应文件打开时，其i节点才在内存中。

#### 目录的实现

目录项中提供了查找文件磁盘块所需要的信息。

每个文件系统维护诸如文件所有者以及创建时间等文件属性，它们必须存储在某个地方。可以存放在目录项中，也可以存储在i节点中。